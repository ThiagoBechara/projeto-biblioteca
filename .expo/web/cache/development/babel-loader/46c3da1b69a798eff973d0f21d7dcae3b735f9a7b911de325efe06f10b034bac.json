{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { PermissionStatus, UnavailabilityError } from 'expo-modules-core';\nfunction getUserMedia(constraints) {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n  var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || function () {\n    var error = new Error('Permission unimplemented');\n    error.code = 0;\n    error.name = 'NotAllowedError';\n    throw error;\n  };\n  return new Promise(function (resolve, reject) {\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\nfunction handleGetUserMediaError(_ref) {\n  var message = _ref.message;\n  if (message === 'Permission dismissed') {\n    return {\n      status: PermissionStatus.UNDETERMINED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false\n    };\n  } else {\n    return {\n      status: PermissionStatus.DENIED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false\n    };\n  }\n}\nfunction handleRequestPermissionsAsync() {\n  var message;\n  return _regeneratorRuntime.async(function handleRequestPermissionsAsync$(_context) {\n    while (1) switch (_context.prev = _context.next) {\n      case 0:\n        _context.prev = 0;\n        _context.next = 3;\n        return _regeneratorRuntime.awrap(getUserMedia({\n          video: true\n        }));\n      case 3:\n        return _context.abrupt(\"return\", {\n          status: PermissionStatus.GRANTED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: true\n        });\n      case 6:\n        _context.prev = 6;\n        _context.t0 = _context[\"catch\"](0);\n        message = _context.t0.message;\n        return _context.abrupt(\"return\", handleGetUserMediaError({\n          message: message\n        }));\n      case 10:\n      case \"end\":\n        return _context.stop();\n    }\n  }, null, null, [[0, 6]], Promise);\n}\nfunction handlePermissionsQueryAsync() {\n  var _navigator, _navigator$permission;\n  var _await$navigator$perm, state;\n  return _regeneratorRuntime.async(function handlePermissionsQueryAsync$(_context2) {\n    while (1) switch (_context2.prev = _context2.next) {\n      case 0:\n        if ((_navigator = navigator) != null && (_navigator$permission = _navigator.permissions) != null && _navigator$permission.query) {\n          _context2.next = 2;\n          break;\n        }\n        throw new UnavailabilityError('expo-barcode-scanner', 'navigator.permissions API is not available');\n      case 2:\n        _context2.next = 4;\n        return _regeneratorRuntime.awrap(navigator.permissions.query({\n          name: 'camera'\n        }));\n      case 4:\n        _await$navigator$perm = _context2.sent;\n        state = _await$navigator$perm.state;\n        _context2.t0 = state;\n        _context2.next = _context2.t0 === 'prompt' ? 9 : _context2.t0 === 'granted' ? 10 : _context2.t0 === 'denied' ? 11 : 12;\n        break;\n      case 9:\n        return _context2.abrupt(\"return\", {\n          status: PermissionStatus.UNDETERMINED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: false\n        });\n      case 10:\n        return _context2.abrupt(\"return\", {\n          status: PermissionStatus.GRANTED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: true\n        });\n      case 11:\n        return _context2.abrupt(\"return\", {\n          status: PermissionStatus.DENIED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: false\n        });\n      case 12:\n      case \"end\":\n        return _context2.stop();\n    }\n  }, null, null, null, Promise);\n}\nexport default {\n  get name() {\n    return 'ExpoBarCodeScannerModule';\n  },\n  get BarCodeType() {\n    return {\n      code39mod43: 'code39mod43',\n      code138: 'code138',\n      interleaved2of5: 'interleaved2of5',\n      aztec: 'aztec',\n      ean13: 'ean13',\n      ean8: 'ean8',\n      qr: 'qr',\n      pdf417: 'pdf417',\n      upc_e: 'upc_e',\n      datamatrix: 'datamatrix',\n      code39: 'code39',\n      code93: 'code93',\n      itf14: 'itf14',\n      codabar: 'codabar',\n      code128: 'code128',\n      upc_a: 'upc_a'\n    };\n  },\n  get Type() {\n    return {\n      front: 'front',\n      back: 'back'\n    };\n  },\n  requestPermissionsAsync: function requestPermissionsAsync() {\n    return function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", handleRequestPermissionsAsync());\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, null, null, null, Promise);\n    }();\n  },\n  getPermissionsAsync: function getPermissionsAsync() {\n    return function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", handlePermissionsQueryAsync());\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, null, null, null, Promise);\n    }();\n  }\n};","map":{"version":3,"names":["PermissionStatus","UnavailabilityError","getUserMedia","constraints","navigator","mediaDevices","webkitGetUserMedia","mozGetUserMedia","error","Error","code","name","Promise","resolve","reject","call","handleGetUserMediaError","_ref","message","status","UNDETERMINED","expires","canAskAgain","granted","DENIED","handleRequestPermissionsAsync","_regeneratorRuntime","async","handleRequestPermissionsAsync$","_context","prev","next","awrap","video","abrupt","GRANTED","t0","stop","handlePermissionsQueryAsync","_navigator","_navigator$permission","_await$navigator$perm","state","handlePermissionsQueryAsync$","_context2","permissions","query","sent","BarCodeType","code39mod43","code138","interleaved2of5","aztec","ean13","ean8","qr","pdf417","upc_e","datamatrix","code39","code93","itf14","codabar","code128","upc_a","Type","front","back","requestPermissionsAsync","_callee","_callee$","_context3","getPermissionsAsync","_callee2","_callee2$","_context4"],"sources":["/workspaces/projeto-biblioteca/node_modules/expo-barcode-scanner/src/ExpoBarCodeScannerModule.web.ts"],"sourcesContent":["import { PermissionResponse, PermissionStatus, UnavailabilityError } from 'expo-modules-core';\n\nfunction getUserMedia(constraints: MediaStreamConstraints): Promise<MediaStream> {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n\n  // First get ahold of the legacy getUserMedia, if present\n  const getUserMedia =\n    // TODO: this method is deprecated, migrate to https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    navigator.getUserMedia ||\n    navigator.webkitGetUserMedia ||\n    navigator.mozGetUserMedia ||\n    function () {\n      const error: any = new Error('Permission unimplemented');\n      error.code = 0;\n      error.name = 'NotAllowedError';\n      throw error;\n    };\n\n  return new Promise((resolve, reject) => {\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\n\nfunction handleGetUserMediaError({ message }: { message: string }): PermissionResponse {\n  // name: NotAllowedError\n  // code: 0\n  if (message === 'Permission dismissed') {\n    return {\n      status: PermissionStatus.UNDETERMINED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false,\n    };\n  } else {\n    return {\n      status: PermissionStatus.DENIED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false,\n    };\n  }\n}\n\nasync function handleRequestPermissionsAsync(): Promise<PermissionResponse> {\n  try {\n    await getUserMedia({\n      video: true,\n    });\n    return {\n      status: PermissionStatus.GRANTED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: true,\n    };\n  } catch ({ message }) {\n    return handleGetUserMediaError({ message });\n  }\n}\n\nasync function handlePermissionsQueryAsync(): Promise<PermissionResponse> {\n  if (!navigator?.permissions?.query) {\n    throw new UnavailabilityError(\n      'expo-barcode-scanner',\n      'navigator.permissions API is not available'\n    );\n  }\n\n  const { state } = await navigator.permissions.query({ name: 'camera' });\n  switch (state) {\n    case 'prompt':\n      return {\n        status: PermissionStatus.UNDETERMINED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: false,\n      };\n    case 'granted':\n      return {\n        status: PermissionStatus.GRANTED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: true,\n      };\n    case 'denied':\n      return {\n        status: PermissionStatus.DENIED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: false,\n      };\n  }\n}\n\nexport default {\n  get name(): string {\n    return 'ExpoBarCodeScannerModule';\n  },\n  get BarCodeType() {\n    return {\n      code39mod43: 'code39mod43',\n      code138: 'code138',\n      interleaved2of5: 'interleaved2of5',\n      aztec: 'aztec',\n      ean13: 'ean13',\n      ean8: 'ean8',\n      qr: 'qr',\n      pdf417: 'pdf417',\n      upc_e: 'upc_e',\n      datamatrix: 'datamatrix',\n      code39: 'code39',\n      code93: 'code93',\n      itf14: 'itf14',\n      codabar: 'codabar',\n      code128: 'code128',\n      upc_a: 'upc_a',\n    };\n  },\n  get Type() {\n    return { front: 'front', back: 'back' };\n  },\n  async requestPermissionsAsync(): Promise<PermissionResponse> {\n    return handleRequestPermissionsAsync();\n  },\n  async getPermissionsAsync(): Promise<PermissionResponse> {\n    return handlePermissionsQueryAsync();\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}